<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration - Orbit Ledger</title>
    <meta name="description" content="Configure Orbit Ledger for your specific use case.">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <nav class="navbar">
        <div class="navbar-container">
            <a href="index.html" class="navbar-brand"><span class="accent">⚡</span> Orbit Ledger</a>
            <ul class="navbar-nav">
                <li><a href="index.html">Home</a></li>
                <li><a href="getting-started.html">Getting Started</a></li>
                <li><a href="configuration.html" class="active">Configuration</a></li>
                <li><a href="api-reference.html">API</a></li>
                <li><a href="examples.html">Examples</a></li>
            </ul>
            <a href="https://github.com/YOUR_USERNAME/Orbit-ledger" class="navbar-github" target="_blank">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                    <path
                        d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>
                GitHub
            </a>
        </div>
    </nav>
    <main>
        <div class="page-header">
            <h1>Configuration</h1>
            <p>Fine-tune Orbit Ledger for your specific use case and performance requirements.</p>
        </div>
        <div class="content-container">
            <section id="full-example">
                <h2>Full Configuration Example</h2>
                <div class="code-block">
                    <div class="code-header">
                        <div class="dots"><span class="dot red"></span><span class="dot yellow"></span><span
                                class="dot green"></span></div>
                        <span class="filename">LedgerConfig.java</span>
                    </div>
                    <div class="code-content">
                        <pre><span class="class">OrbitLedger</span> Orbit = <span class="class">OrbitLedger</span>.<span class="function">builder</span>()
    .<span class="function">bufferSize</span>(<span class="number">1024</span> * <span class="number">64</span>)
    .<span class="function">threadCount</span>(<span class="number">4</span>)
    .<span class="function">releaseType</span>(<span class="class">ReleaseType</span>.HYBRID)
    .<span class="function">releaseThreshold</span>(<span class="number">500</span>)
    .<span class="function">releaseInterval</span>(<span class="class">Duration</span>.<span class="function">ofSeconds</span>(<span class="number">30</span>))
    .<span class="function">balanceLoader</span>(key -> db.<span class="function">getBalance</span>(key))
    .<span class="function">defaultBalance</span>(<span class="number">0</span>)
    .<span class="function">evictionPolicy</span>(<span class="class">EvictionPolicy</span>.AFTER_RELEASE)
    .<span class="function">onRelease</span>(result -> {
        db.<span class="function">updateBalance</span>(result.<span class="function">key</span>(), result.<span class="function">runningBalance</span>());
        db.<span class="function">insertEvents</span>(result.<span class="function">events</span>());
    })
    .<span class="function">build</span>();</pre>
                    </div>
                </div>
            </section>

            <section id="options">
                <h2>All Configuration Options</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Parameter</th>
                                <th>Default</th>
                                <th>Required</th>
                                <th>Description</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>bufferSize</code></td>
                                <td>1024</td>
                                <td>No</td>
                                <td>Ring Buffer size. <strong>Must be power of 2</strong></td>
                            </tr>
                            <tr>
                                <td><code>threadCount</code></td>
                                <td>1</td>
                                <td>No</td>
                                <td>Worker threads. Keys sharded by: <code>hash(key) % threads</code></td>
                            </tr>
                            <tr>
                                <td><code>releaseType</code></td>
                                <td>COUNT</td>
                                <td>No</td>
                                <td>Release strategy: COUNT, TIME, or HYBRID</td>
                            </tr>
                            <tr>
                                <td><code>releaseThreshold</code></td>
                                <td>1000</td>
                                <td>Depends</td>
                                <td>Events before auto-release. Required for COUNT/HYBRID</td>
                            </tr>
                            <tr>
                                <td><code>releaseInterval</code></td>
                                <td>null</td>
                                <td>Depends</td>
                                <td>Time between auto-releases. Required for TIME/HYBRID</td>
                            </tr>
                            <tr>
                                <td><code>onRelease</code></td>
                                <td>—</td>
                                <td><strong>Yes</strong></td>
                                <td>Callback for persistence</td>
                            </tr>
                            <tr>
                                <td><code>balanceLoader</code></td>
                                <td>null</td>
                                <td>No</td>
                                <td>Function to load initial balance from DB</td>
                            </tr>
                            <tr>
                                <td><code>defaultBalance</code></td>
                                <td>0</td>
                                <td>No</td>
                                <td>Default balance when no balanceLoader provided</td>
                            </tr>
                            <tr>
                                <td><code>evictionPolicy</code></td>
                                <td>NONE</td>
                                <td>No</td>
                                <td>NONE: keep in memory. AFTER_RELEASE: clear after each batch</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="release-types">
                <h2>Release Type Options</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Triggers On</th>
                                <th>Best For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>COUNT</code></td>
                                <td>Event threshold</td>
                                <td>High-volume accounts</td>
                            </tr>
                            <tr>
                                <td><code>TIME</code></td>
                                <td>Time interval</td>
                                <td>Low-volume or latency-sensitive</td>
                            </tr>
                            <tr>
                                <td><code>HYBRID</code></td>
                                <td><strong>Either</strong></td>
                                <td><strong>Mixed workloads (recommended)</strong></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="callout callout-info">
                    <div class="callout-title">💡 Recommended: HYBRID</div>
                    <p>Use HYBRID for most production deployments. No data gets stuck in Orbit!</p>
                </div>
            </section>

            <section id="performance">
                <h2>Performance Tuning Guide</h2>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Scenario</th>
                                <th>Recommended Setting</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Low Latency</strong></td>
                                <td><code>releaseThreshold(10-100)</code>, <code>bufferSize(1024)</code></td>
                            </tr>
                            <tr>
                                <td><strong>High Throughput</strong></td>
                                <td><code>releaseThreshold(5000+)</code>, <code>bufferSize(65536)</code></td>
                            </tr>
                            <tr>
                                <td><strong>Multi-Core</strong></td>
                                <td><code>threadCount(CPU cores - 2)</code></td>
                            </tr>
                            <tr>
                                <td><strong>Large Account Base</strong></td>
                                <td><code>evictionPolicy(AFTER_RELEASE)</code> + <code>balanceLoader</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>
        </div>
    </main>
    <footer class="footer">
        <p>Built with ❤️ by <a href="https://linkedin.com/in/fauzan-hilmy" target="_blank">Fauzan Hilmy Abyan</a> • <a
                href="https://github.com/YOUR_USERNAME/Orbit-ledger">GitHub</a></p>
    </footer>
    <script src="js/main.js"></script>
</body>

</html>